# 边的样式配置说明

## 概述

Vassago 插件通过读取 `ob_relation/` 目录中的配置文件来定义图视图中不同关系类型的视觉样式。每个关系类型对应一个 `.md` 文件。

## 配置文件结构

### 文件位置

```
<你的vault>/
└── ob_relation/
    ├── supports.md
    ├── refutes.md
    ├── derived_from.md
    └── ...
```

### 文件格式

每个配置文件包含两部分：

1. **Frontmatter**（YAML 格式）- 定义样式配置
2. **正文**（Markdown 格式）- 说明文档（可选）

```markdown
---
$color: "#4CAF50"
$shape: straight
$pattern: solid
$width: 2
$arrow: true
$direction: outgoing
$inverse: "supported_by"
$label: "支持"
$description: "表示A支持/证实B的观点"
---

# supports（支持）

这里是关于这个关系类型的说明文档...
```

## 配置项详解

### 必需配置项

#### `$color` - 边颜色

- **类型**: 字符串（Hex 颜色值）
- **格式**: `"#RRGGBB"`
- **示例**: `"#4CAF50"`（绿色）
- **说明**: 定义边在图视图中的颜色

**常用颜色参考**：

| 颜色 | Hex 值 | 适用场景 |
|------|--------|----------|
| 绿色 | `#4CAF50` | 支持、肯定关系 |
| 红色 | `#F44336` | 反驳、否定关系 |
| 蓝色 | `#2196F3` | 派生、演化关系 |
| 紫色 | `#9C27B0` | 等价、对称关系 |
| 青色 | `#00BCD4` | 相关、关联关系 |
| 橙色 | `#FF9800` | 因果关系 |
| 灰色 | `#808080` | 一般关系 |

#### `$shape` - 线条形状

- **类型**: 字符串
- **可选值**: 
  - `straight` - 直线
  - `curved` - 曲线
- **默认值**: `straight`
- **示例**: `$shape: curved`

**形状说明**：

| 值 | 效果 | 适用场景 |
|----|------|----------|
| `straight` | 直线连接 | 强关系、确定性关系、因果关系 |
| `curved` | 优雅弧线 | 松散关联、需要视觉区分的关系 |

#### `$pattern` - 线条图案

- **类型**: 字符串
- **可选值**:
  - `solid` - 实线
  - `dotted` - 点线
- **默认值**: `solid`
- **示例**: `$pattern: dotted`

**图案说明**：

| 值 | 效果 | 适用场景 |
|----|------|----------|
| `solid` | 实线 ━━━ | 强关系、单向关系 |
| `dotted` | 点线 ┈┈┈ | 等价关系、对称关系、弱关系 |

#### `$width` - 线宽

- **类型**: 数字
- **单位**: 像素
- **推荐值**: `1-4`
- **默认值**: `2`
- **示例**: `$width: 3`

**线宽建议**：

| 值 | 效果 | 适用场景 |
|----|------|----------|
| `1` | 细线 | 次要关系、辅助连接 |
| `2` | 标准 | 一般关系（推荐） |
| `3` | 粗线 | 重要关系、强调 |
| `4` | 很粗 | 核心关系、特别强调 |

#### `$arrow` - 箭头

- **类型**: 布尔值
- **可选值**: `true` / `false`
- **默认值**: `true`
- **示例**: `$arrow: false`

**箭头说明**：

| 值 | 效果 | 适用场景 |
|----|------|----------|
| `true` | 显示箭头 | 有方向性的关系 |
| `false` | 不显示箭头 | 对称关系、等价关系 |

#### `$direction` - 边方向

- **类型**: 字符串
- **可选值**:
  - `outgoing` - 从当前笔记指向目标笔记
  - `incoming` - 从目标笔记指向当前笔记
  - `bidirectional` - 双向关系
- **默认值**: `outgoing`
- **示例**: `$direction: bidirectional`

**方向说明**：

| 值 | 效果 | 示例 |
|----|------|------|
| `outgoing` | A → B | A 支持 B |
| `incoming` | B → A | A 派生自 B（实际是 B → A） |
| `bidirectional` | A ↔ B | A 等价于 B |

### 可选配置项

#### `$inverse` - 反向关系

- **类型**: 字符串
- **说明**: 定义反向关系的类型名
- **示例**: `$inverse: "supported_by"`

**使用场景**：

```yaml
# supports.md
---
$inverse: "supported_by"
---

# supported_by.md
---
$inverse: "supports"
---
```

#### `$label` - 显示标签

- **类型**: 字符串
- **说明**: 在图视图中显示的文本标签
- **示例**: `$label: "支持"`

**建议**：
- 使用简短的中文或英文
- 不超过 4 个字符
- 清晰表达关系含义

#### `$description` - 描述

- **类型**: 字符串
- **说明**: 关系类型的详细描述（用于文档）
- **示例**: `$description: "表示A支持/证实B的观点"`

## 线型组合

### 支持的组合

| 组合 | shape | pattern | 视觉效果 | 适用场景 |
|------|-------|---------|----------|----------|
| **直线+实线** | `straight` | `solid` | ━━━ | 强关系、因果关系、派生关系 |
| **直线+点线** | `straight` | `dotted` | ┈┈┈ | 等价关系、对称关系 |
| **曲线+实线** | `curved` | `solid` | ╭─╮ | 松散关联、相关关系 |
| **曲线+点线** | `curved` | `dotted` | ╭┈╮ | 暂不支持，使用曲线+实线 |

### 组合建议

#### 强关系（确定性高）
```yaml
$shape: straight
$pattern: solid
$arrow: true
```

#### 等价关系（对称性）
```yaml
$shape: straight
$pattern: dotted
$arrow: false
$direction: bidirectional
```

#### 松散关联（不确定性）
```yaml
$shape: curved
$pattern: solid
$arrow: true
```

## 完整示例

### 示例 1：支持关系

```yaml
---
$color: "#4CAF50"
$shape: straight
$pattern: solid
$width: 2
$arrow: true
$direction: outgoing
$inverse: "supported_by"
$label: "支持"
$description: "表示A支持/证实B的观点"
---

# supports（支持）

当节点A的内容支持、证实或强化节点B时使用此关系。

## 使用示例

\`\`\`yaml
---
supports: "[[目标笔记]]"
---
\`\`\`
```

### 示例 2：等价关系

```yaml
---
$color: "#9C27B0"
$shape: straight
$pattern: dotted
$width: 2
$arrow: false
$direction: bidirectional
$label: "等价于"
$description: "表示A与B在某种意义上等价"
---

# equivalent_to（等价于）

当节点A与节点B在概念上等价、可互换或表达相同含义时使用此关系。
```

### 示例 3：相关关系（曲线）

```yaml
---
$color: "#00BCD4"
$shape: curved
$pattern: solid
$width: 2
$arrow: true
$direction: bidirectional
$label: "相关"
$description: "表示A与B相关"
---

# related_to（相关）

当节点A与节点B存在某种关联时使用此关系。使用曲线样式使其在图视图中更加优雅。
```

## 最佳实践

### 1. 命名规范

- **文件名**: 使用小写字母和下划线，如 `supports.md`、`derived_from.md`
- **标签**: 使用简短的中文或英文，如 "支持"、"派生自"

### 2. 颜色选择

- **语义化**: 选择与关系含义相符的颜色
  - 绿色 → 正面、支持
  - 红色 → 负面、反驳
  - 蓝色 → 中性、派生
- **对比度**: 确保颜色在深色和浅色主题下都清晰可见
- **一致性**: 相似的关系使用相近的颜色

### 3. 形状和图案

- **直线**: 用于明确的、强的关系
- **曲线**: 用于松散的、弱的关系
- **实线**: 用于单向或有方向性的关系
- **点线**: 用于对称或等价关系

### 4. 方向设置

- **outgoing**: 大多数关系（A 影响 B）
- **incoming**: 反向关系（A 来源于 B）
- **bidirectional**: 对称关系（A 等价于 B）

## 常见问题

### Q: 为什么要使用 $ 前缀？

A: 防止与 Obsidian 内部变量冲突。Obsidian 可能会使用 `color`、`width` 等字段名，使用 `$` 前缀可以明确标识这是插件配置。

### Q: 可以不设置某些配置项吗？

A: 可以。未设置的配置项会使用默认值：
- `$color`: `#808080`（灰色）
- `$shape`: `straight`
- `$pattern`: `solid`
- `$width`: `2`
- `$arrow`: `true`
- `$direction`: `outgoing`

### Q: 如何创建反向关系？

A: 创建两个配置文件，互相引用：

```yaml
# supports.md
---
$inverse: "supported_by"
---

# supported_by.md
---
$inverse: "supports"
$direction: incoming
---
```

### Q: 曲线+点线为什么不支持？

A: 技术上可以实现，但视觉效果不佳。曲线本身已经提供了足够的视觉区分，点线会使其过于复杂。

### Q: 如何在笔记中使用这些关系？

A: 在笔记的 frontmatter 中定义：

```yaml
---
supports: "[[目标笔记]]"
derived_from:
  - "[[来源1]]"
  - "[[来源2]]"
---
```

## 预定义关系类型

插件提供了以下预定义关系类型（在 `examples/ob_relation/` 目录）：

| 类型 | 颜色 | 形状 | 图案 | 用途 |
|------|------|------|------|------|
| `supports` | 绿色 | 直线 | 实线 | 支持/证实 |
| `refutes` | 红色 | 直线 | 实线 | 反驳/否定 |
| `derived_from` | 蓝色 | 直线 | 实线 | 派生自 |
| `equivalent_to` | 紫色 | 直线 | 点线 | 等价于 |
| `related_to` | 青色 | 曲线 | 实线 | 相关 |

你可以根据需要修改或创建新的关系类型。

## 更新配置

修改配置文件后，插件会自动检测并重新加载。如果没有生效，可以：

1. 重新加载 Obsidian（Ctrl+R）
2. 检查配置文件的 YAML 格式是否正确
3. 查看开发者控制台（Ctrl+Shift+I）是否有错误信息

---

**Vassago** - 揭示隐藏的关联，连接知识的过去与未来 🔮
