# Obsidian çº¯å›¾ç»“æ„ç¬”è®°æ’ä»¶è®¾è®¡

## èƒŒæ™¯

Obsidian çš„åŒé“¾åŠŸèƒ½æ¯”è¾ƒé¸¡è‚‹â€”â€”å®ƒåªæ˜¯å•çº¯çš„"å¼•ç”¨"ï¼Œæ²¡æœ‰**è¾¹çš„è¯­ä¹‰**ã€‚`[[A]]` åªè¡¨ç¤º"å¼•ç”¨äº†A"ï¼Œä½†ä¸çŸ¥é“æ˜¯"æ”¯æŒA"ã€"åé©³A"ã€"æ˜¯Açš„å®ä¾‹"è¿˜æ˜¯"ä¾èµ–A"ã€‚

ç›®æ ‡ï¼šå®ç°ä¸€ä¸ªçº¯å›¾ç»“æ„çš„ç¬”è®°ç®¡ç†ç³»ç»Ÿï¼Œå…¶ä¸­ï¼š
- **èŠ‚ç‚¹** = mdæ–‡ä»¶
- **è¾¹** = æœ‰ç±»å‹ã€æœ‰æ ·å¼çš„å…³ç³»

---

## æ–¹æ¡ˆæ¢ç´¢

### æ–¹æ¡ˆ1ï¼šFrontmatter å®šä¹‰è¾¹ï¼ˆå¤æ‚ç‰ˆï¼‰

```yaml
---
relations:
  - target: "çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹"
    type: "derived_from"
    note: "ç†µæ˜¯ç¬¬äºŒå®šå¾‹çš„æ ¸å¿ƒæ¦‚å¿µ"
  - target: "ä¿¡æ¯è®º"
    type: "borrowed_by"
    weight: 0.9
---
```

**ä¼˜ç‚¹**ï¼šç»“æ„åŒ–ã€è¾¹å¯ä»¥æœ‰å¤šä¸ªå±æ€§
**ç¼ºç‚¹**ï¼šå†™èµ·æ¥ç¹ç

### æ–¹æ¡ˆ2ï¼šå±æ€§åå³è¾¹ç±»å‹ï¼ˆç®€åŒ–ç‰ˆï¼‰âœ… å·²é€‰å®š

```yaml
---
supports: "[[ç›®æ ‡A]]"
refutes: "[[ç›®æ ‡B]]"
derived_from:
  - "[[ç›®æ ‡C]]"
  - "[[ç›®æ ‡D]]"
---
```

**ä¼˜ç‚¹**ï¼šç®€æ´ã€ä¸ç°æœ‰æ’ä»¶å…¼å®¹
**ç¼ºç‚¹**ï¼šè¾¹çš„é¢å¤–å±æ€§éœ€è¦å¦å¤–å­˜å‚¨

---

## å‚è€ƒæ’ä»¶åˆ†æ

### 1. Graph-Link-Types

**æ ¸å¿ƒæ€è·¯**ï¼š
- ä½¿ç”¨ Dataview API è¯»å– frontmatter
- **è¾¹çš„ç±»å‹ = frontmatter å±æ€§å**
- ç”¨ PixiJS åœ¨ Graph View ä¸Šå åŠ æ¸²æŸ“

**å…³é”®ä»£ç ** (`linkManager.ts`):
```typescript
// éå†æºæ–‡ä»¶çš„æ‰€æœ‰frontmatterå±æ€§
for (const [key, value] of Object.entries(sourcePage)) {
    // å¦‚æœå±æ€§å€¼æ˜¯æŒ‡å‘ç›®æ ‡çš„é“¾æ¥ï¼Œå±æ€§åå°±æ˜¯è¾¹ç±»å‹
    if (value.path === targetId) {
        return key;  // è¿”å›å±æ€§åä½œä¸ºè¾¹ç±»å‹
    }
}
```

**ä»£ç ç»“æ„**ï¼š
```
Graph-Link-Types/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts          # æ’ä»¶å…¥å£ï¼Œç›‘å¬layout-change
â”‚   â”œâ”€â”€ linkManager.ts   # æ ¸å¿ƒé€»è¾‘ï¼Œç®¡ç†è¾¹çš„æ¸²æŸ“
â”‚   â””â”€â”€ types.ts         # ç±»å‹å®šä¹‰
```

**ä¼˜ç‚¹**ï¼šä»£ç åªæœ‰3ä¸ªæ–‡ä»¶ï¼Œéå¸¸ç®€æ´
**ç¼ºç‚¹**ï¼šä¾èµ– Dataviewï¼Œè¾¹åªæœ‰ç±»å‹æ²¡æœ‰å…¶ä»–å±æ€§

### 2. Extended Graph

**æ ¸å¿ƒæ€è·¯**ï¼šä¸ Graph-Link-Types ç›¸åŒï¼Œä½†åŠŸèƒ½æ›´ä¸°å¯Œ

**å…³é”®ä»£ç ** (`helpers/vault.ts`):
```typescript
// ä» frontmatterLinks è·å–è¾¹ç±»å‹
for (const linkCache of frontmatterLinks) {
    const linkType = linkCache.key.split('.')[0];  // å±æ€§åä½œä¸ºç±»å‹
}
```

**åŠŸèƒ½**ï¼š
- é“¾æ¥ç±»å‹ç€è‰²å’Œæ ‡ç­¾
- æ›²çº¿é“¾æ¥
- èŠ‚ç‚¹å›¾æ ‡/å›¾ç‰‡
- æŒ‰æ ‡ç­¾/æ–‡ä»¶å¤¹/å±æ€§åˆ†ç»„ç€è‰²
- å›¾å±‚ç®¡ç†
- è¿‡æ»¤å™¨

**ç¼ºç‚¹**ï¼šä»£ç æå…¶å¤æ‚ï¼ˆ50+æ–‡ä»¶ï¼‰ï¼Œéš¾ä»¥ç»´æŠ¤

---

## æœ€ç»ˆæ–¹æ¡ˆï¼šå¢å¼ºç‰ˆ Graph-Link-Types

### æ ¸å¿ƒè®¾è®¡

1. **è¾¹çš„å®šä¹‰**ï¼šåœ¨ç¬”è®°çš„ frontmatter ä¸­ï¼Œå±æ€§å = è¾¹ç±»å‹
2. **è¾¹çš„æ ·å¼**ï¼šåœ¨ `ob_relation/` ç›®å½•ä¸­ï¼Œæ¯ä¸ªè¾¹ç±»å‹ä¸€ä¸ªé…ç½®æ–‡ä»¶

### ç›®å½•ç»“æ„

```
root/
â”œâ”€â”€ ob_relation/                    # è¾¹ç±»å‹æ ·å¼é…ç½®ï¼ˆå…¨å±€ï¼‰
â”‚   â”œâ”€â”€ supports.md              # color: #4CAF50, style: solid
â”‚   â”œâ”€â”€ refutes.md               # color: #F44336, style: dashed
â”‚   â”œâ”€â”€ derived_from.md          # color: #2196F3, style: solid
â”‚   â”œâ”€â”€ equivalent_to.md         # color: #9C27B0, style: dotted
â”‚   â””â”€â”€ instance_of.md           # color: #FF9800, style: solid
â”‚
â”œâ”€â”€ demo/                        # ç¬”è®°ç¤ºä¾‹
â”‚   â”œâ”€â”€ ç†µ.md
â”‚   â”œâ”€â”€ çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹.md
â”‚   â”œâ”€â”€ ä¿¡æ¯è®º.md
â”‚   â”œâ”€â”€ ä¿¡æ¯ç†µ.md
â”‚   â””â”€â”€ æ—¶é—´ä¹‹ç®­.md
â”‚
â””â”€â”€ README.md
```

### è¾¹çš„å®šä¹‰ï¼ˆç¬”è®° frontmatterï¼‰

```yaml
---
supports: "[[çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹]]"
equivalent_to: "[[ä¿¡æ¯ç†µ]]"
---

# ç†µ

ç†µæ˜¯æè¿°ç³»ç»Ÿæ— åºç¨‹åº¦çš„ç‰©ç†é‡ã€‚
```

### è¾¹çš„æ ·å¼é…ç½®ï¼ˆob_relation/*.mdï¼‰

```yaml
---
$color: "#4CAF50"          # è¾¹é¢œè‰² (hex)
$shape: straight           # straightï¼ˆç›´çº¿ï¼‰| curvedï¼ˆæ›²çº¿ï¼‰
$pattern: solid            # solidï¼ˆå®çº¿ï¼‰| dottedï¼ˆç‚¹çº¿ï¼‰
$width: 2                  # çº¿å®½
$arrow: true               # æ˜¯å¦æ˜¾ç¤ºç®­å¤´
$direction: outgoing       # outgoing | incoming | bidirectional
$inverse: "supported_by"   # åå‘å…³ç³»ç±»å‹å
$label: "æ”¯æŒ"             # åœ¨å›¾ä¸Šæ˜¾ç¤ºçš„æ ‡ç­¾
$description: "è¡¨ç¤ºAæ”¯æŒ/è¯å®Bçš„è§‚ç‚¹"
---

# supportsï¼ˆæ”¯æŒï¼‰

å½“èŠ‚ç‚¹Açš„å†…å®¹æ”¯æŒã€è¯å®æˆ–å¼ºåŒ–èŠ‚ç‚¹Bæ—¶ä½¿ç”¨æ­¤å…³ç³»ã€‚
```

**é…ç½®è¯´æ˜**ï¼š
- æ‰€æœ‰é…ç½®é¡¹å¿…é¡»ä½¿ç”¨ `$` å‰ç¼€ï¼Œé˜²æ­¢ä¸ Obsidian å†…éƒ¨å˜é‡å†²çª
- `$shape`: çº¿æ¡å½¢çŠ¶ï¼Œ`straight`ï¼ˆç›´çº¿ï¼‰æˆ– `curved`ï¼ˆæ›²çº¿ï¼‰
- `$pattern`: çº¿æ¡å›¾æ¡ˆï¼Œ`solid`ï¼ˆå®çº¿ï¼‰æˆ– `dotted`ï¼ˆç‚¹çº¿ï¼‰
- åˆ é™¤äº† `dashed`ï¼ˆè™šçº¿ï¼‰é€‰é¡¹

### ç¬”è®°ä¸­ä½¿ç”¨å…³ç³»çš„ä¸¤ç§æ–¹å¼

è¯¦è§ï¼š[ç¬”è®°ä½¿ç”¨æŒ‡å—](./ç¬”è®°ä½¿ç”¨æŒ‡å—.md)

#### æ–¹å¼1ï¼šFrontmatterï¼ˆæ¨èï¼‰
```yaml
---
supports: "[[çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹]]"
derived_from:
  - "[[ç»å°”å…¹æ›¼ç†µ]]"
  - "[[ä¿¡æ¯è®º]]"
---
```

#### æ–¹å¼2ï¼šå†…è”å…³ç³»ï¼ˆDataviewï¼‰
```markdown
è¿™ä¸ªè§‚ç‚¹ [supports:: [[çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹]]]ï¼Œä½† [refutes:: [[æ°¸åŠ¨æœº]]]ã€‚
```

**å»ºè®®**ï¼šæ ¸å¿ƒå…³ç³»ç”¨ Frontmatterï¼Œä¸Šä¸‹æ–‡æ³¨é‡Šç”¨å†…è”ã€‚

---

## æ’ä»¶æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ’ä»¶æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. RelationStyleManager                                    â”‚
â”‚     â”œâ”€â”€ ç›‘å¬ ob_relation/ ç›®å½•å˜åŒ–                              â”‚
â”‚     â”œâ”€â”€ è§£ææ¯ä¸ª .md çš„ frontmatter                          â”‚
â”‚     â””â”€â”€ ç¼“å­˜: Map<è¾¹ç±»å‹å, {color, style, width, ...}>      â”‚
â”‚                                                             â”‚
â”‚  2. LinkTypeResolver (å¤ç”¨ Graph-Link-Types é€»è¾‘)            â”‚
â”‚     â”œâ”€â”€ éå†ç¬”è®° frontmatter                                 â”‚
â”‚     â””â”€â”€ å±æ€§å = è¾¹ç±»å‹ï¼Œå±æ€§å€¼ = ç›®æ ‡èŠ‚ç‚¹                    â”‚
â”‚                                                             â”‚
â”‚  3. GraphRenderer (åŸºäº PixiJS)                             â”‚
â”‚     â”œâ”€â”€ æ ¹æ®è¾¹ç±»å‹æŸ¥è¯¢æ ·å¼                                   â”‚
â”‚     â”œâ”€â”€ åº”ç”¨ color/style/width                              â”‚
â”‚     â””â”€â”€ æ¸²æŸ“åˆ° Graph View                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæµç¨‹

1. **å¯åŠ¨æ—¶**ï¼šæ‰«æ `ob_relation/` ç›®å½•ï¼Œè¯»å–æ‰€æœ‰è¾¹ç±»å‹çš„æ ·å¼é…ç½®
2. **æ–‡ä»¶ååŒ¹é…**ï¼š`ob_relation/supports.md` â†’ è¾¹ç±»å‹ `supports`
3. **Graphæ¸²æŸ“æ—¶**ï¼š
   - éå†æ‰€æœ‰é“¾æ¥
   - è·å–è¾¹ç±»å‹ï¼ˆfrontmatter å±æ€§åï¼‰
   - æŸ¥è¯¢å¯¹åº”æ ·å¼
   - ç”¨ PixiJS æ¸²æŸ“

---

## è¾¹çš„æ–¹å‘è®¾è®¡

### æ–¹æ¡ˆé€‰æ‹©ï¼šåœ¨ ob_relation é…ç½®ä¸­å®šä¹‰æ–¹å‘è¯­ä¹‰ âœ…

è¾¹çš„æ–¹å‘é€šè¿‡ `direction` å’Œ `inverse` å­—æ®µåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ã€‚

### é…ç½®ç¤ºä¾‹

```yaml
# ob_relation/supports.md
---
color: "#4CAF50"
style: solid
width: 2
arrow: true
direction: outgoing        # outgoing | incoming | bidirectional
inverse: "supported_by"    # åå‘å…³ç³»ç±»å‹å
label: æ”¯æŒ
---
```

```yaml
# ob_relation/supported_by.md
---
color: "#4CAF50"
style: solid
width: 2
arrow: true
direction: incoming
inverse: "supports"
label: è¢«æ”¯æŒ
---
```

### ä½¿ç”¨æ–¹å¼

```yaml
# åœ¨ A.md ä¸­
---
supports: "[[B]]"           # A â†’ Bï¼ˆAæ”¯æŒBï¼‰
supported_by: "[[C]]"       # C â†’ Aï¼ˆAè¢«Cæ”¯æŒï¼‰
---
```

### æ–¹å‘å­—æ®µè¯´æ˜

| å­—æ®µ | å€¼ | å«ä¹‰ |
|------|------|------|
| `direction` | `outgoing` | å½“å‰æ–‡ä»¶ â†’ ç›®æ ‡æ–‡ä»¶ |
| `direction` | `incoming` | ç›®æ ‡æ–‡ä»¶ â†’ å½“å‰æ–‡ä»¶ |
| `direction` | `bidirectional` | åŒå‘å…³ç³» |
| `inverse` | è¾¹ç±»å‹å | è¯¥å…³ç³»çš„åå‘å…³ç³»ç±»å‹ |

### æˆå¯¹å…³ç³»ç¤ºä¾‹

| æ­£å‘å…³ç³» | åå‘å…³ç³» | è¯´æ˜ |
|----------|----------|------|
| `supports` | `supported_by` | æ”¯æŒ â†” è¢«æ”¯æŒ |
| `derived_from` | `derives` | æ´¾ç”Ÿè‡ª â†” æ´¾ç”Ÿå‡º |
| `instance_of` | `has_instance` | æ˜¯å®ä¾‹ â†” æœ‰å®ä¾‹ |
| `refutes` | `refuted_by` | åé©³ â†” è¢«åé©³ |

---

## é¢„å®šä¹‰è¾¹ç±»å‹

### åŸºç¡€å…³ç³»

| ç±»å‹ | åå‘ç±»å‹ | é¢œè‰² | å½¢çŠ¶ | å›¾æ¡ˆ | å«ä¹‰ |
|------|----------|------|------|------|------|
| `supports` | `supported_by` | #4CAF50 (ç»¿) | straight | solid | Aæ”¯æŒ/è¯å®B |
| `refutes` | `refuted_by` | #F44336 (çº¢) | straight | solid | Aåé©³/å¦å®šB |
| `derived_from` | `derives` | #2196F3 (è“) | straight | solid | Aä»Bæ´¾ç”Ÿ |
| `equivalent_to` | - | #9C27B0 (ç´«) | straight | dotted | Aä¸Bç­‰ä»·ï¼ˆåŒå‘ï¼‰ |
| `instance_of` | `has_instance` | #FF9800 (æ©™) | straight | solid | Aæ˜¯Bçš„å®ä¾‹ |

### å› æœä¸ä¾èµ–

| ç±»å‹ | åå‘ç±»å‹ | é¢œè‰² | å½¢çŠ¶ | å›¾æ¡ˆ | å«ä¹‰ |
|------|----------|------|------|------|------|
| `causes` | `caused_by` | #FF5722 (æ·±æ©™) | straight | solid | Aå¯¼è‡´B |
| `depends_on` | `depended_by` | #9E9E9E (ç°) | straight | solid | Aä¾èµ–äºB |

### ç»“æ„å…³ç³»

| ç±»å‹ | åå‘ç±»å‹ | é¢œè‰² | å½¢çŠ¶ | å›¾æ¡ˆ | å«ä¹‰ |
|------|----------|------|------|------|------|
| `part_of` | `has_part` | #795548 (æ£•) | straight | solid | Aæ˜¯Bçš„ä¸€éƒ¨åˆ† |
| `extends` | `extended_by` | #009688 (é’) | straight | solid | Aæ‰©å±•B |

### ç»§æ‰¿ä¸åˆ†ç±»

| ç±»å‹ | åå‘ç±»å‹ | é¢œè‰² | å½¢çŠ¶ | å›¾æ¡ˆ | å«ä¹‰ |
|------|----------|------|------|------|------|
| `inherits_from` | `inherited_by` | #FF6F00 (æ©™çº¢) | straight | solid | Aç»§æ‰¿Bï¼ˆOOPç»§æ‰¿ï¼‰ |
| `subclass_of` | `has_subclass` | #FF6F00 (æ©™çº¢) | straight | solid | Aæ˜¯Bçš„å­ç±»ï¼ˆæ¦‚å¿µå±‚çº§ï¼‰ |

### åº”ç”¨ä¸å®ç°

| ç±»å‹ | åå‘ç±»å‹ | é¢œè‰² | å½¢çŠ¶ | å›¾æ¡ˆ | å«ä¹‰ |
|------|----------|------|------|------|------|
| `applies_to` | `applied_by` | #3F51B5 (é›) | straight | solid | Aåº”ç”¨äºB |

### å¯¹ç«‹ä¸ç›¸ä¼¼

| ç±»å‹ | åå‘ç±»å‹ | é¢œè‰² | å½¢çŠ¶ | å›¾æ¡ˆ | å«ä¹‰ |
|------|----------|------|------|------|------|
| `contradicts` | `contradicted_by` | #E91E63 (ç²‰çº¢) | straight | solid | Aä¸BçŸ›ç›¾ |
| `similar_to` | - | #00BCD4 (é’è‰²) | straight | dotted | Aä¸Bç›¸ä¼¼ï¼ˆåŒå‘ï¼‰ |
| `related_to` | - | #00BCD4 (é’è‰²) | curved | solid | Aä¸Bç›¸å…³ï¼ˆåŒå‘ï¼Œæ›²çº¿ï¼‰ |

---

## å¼€å‘çŠ¶æ€

### âœ… å·²å®Œæˆ

1. âœ… åŸºäº Graph-Link-Types ä»£ç ç»“æ„æ”¹é€ 
2. âœ… æ·»åŠ  RelationStyleManager æ¨¡å—
3. âœ… å®ç°è¾¹æ ·å¼çš„åŠ¨æ€åŠ è½½
4. âœ… æ”¯æŒ solid/dotted çº¿æ¡å›¾æ¡ˆ
5. âœ… æ”¯æŒ straight/curved çº¿æ¡å½¢çŠ¶
6. âœ… å¼ºåˆ¶ä½¿ç”¨ $ å‰ç¼€é˜²æ­¢å˜é‡å†²çª
7. âœ… æ‹†åˆ† shape å’Œ pattern é…ç½®
8. âœ… åˆ é™¤ dashed è™šçº¿é€‰é¡¹
9. âœ… éšè—åŸå§‹é“¾æ¥çº¿ï¼Œåªæ˜¾ç¤ºè‡ªå®šä¹‰çº¿æ¡

### ğŸš§ åç»­è®¡åˆ’

1. æ”¯æŒæ›´å¤š shape ç±»å‹ï¼ˆæ³¢æµªçº¿ã€æŠ˜çº¿ç­‰ï¼‰
2. æ”¯æŒæ›´å¤š pattern ç±»å‹ï¼ˆé•¿è™šçº¿ã€ç‚¹åˆ’çº¿ç­‰ï¼‰
3. æ”¯æŒç®­å¤´æ ·å¼è‡ªå®šä¹‰
4. å¯é€‰ï¼šæ·»åŠ è¾¹çš„æƒé‡æ˜¾ç¤º
5. å¯é€‰ï¼šæ”¯æŒè¾¹çš„åŠ¨ç”»æ•ˆæœ
